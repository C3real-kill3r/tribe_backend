# =============================================================================
# Tribe Backend - Environment Configuration
# =============================================================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control (it's in .gitignore)
# =============================================================================

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
APP_NAME=Tribe
APP_ENV=development
DEBUG=true
API_VERSION=v1
SECRET_KEY=change-this-secret-key-in-production-use-strong-random-key

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
# Format: postgresql+asyncpg://user:password@host:port/database
# For local development with Docker:
DATABASE_URL=postgresql+asyncpg://tribe_user:tribe_password@localhost:5432/tribe_db

# For local development without Docker (if PostgreSQL is installed locally):
# DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/tribe_db

# For production (example):
# DATABASE_URL=postgresql+asyncpg://user:password@db.example.com:5432/tribe_prod

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# For local development with Docker:
REDIS_URL=redis://localhost:6379/0

# For local development without Docker:
# REDIS_URL=redis://localhost:6379/0

# For production with password:
# REDIS_URL=redis://:password@redis.example.com:6379/0

# Optional: Redis password (if required)
# REDIS_PASSWORD=your-redis-password

# -----------------------------------------------------------------------------
# JWT Authentication Configuration
# -----------------------------------------------------------------------------
# IMPORTANT: Generate a strong random secret key for production!
# You can generate one with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=change-this-jwt-secret-in-production-use-strong-random-key
JWT_ALGORITHM=HS256

# Token expiration times
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=30

# -----------------------------------------------------------------------------
# AWS S3 / CloudFlare R2 Configuration (for file storage)
# -----------------------------------------------------------------------------
# Leave empty if not using S3 (files won't be uploaded)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET=tribe-app-media

# Optional: CloudFront CDN domain for serving media
# CLOUDFRONT_DOMAIN=cdn.tribe.app

# For CloudFlare R2 (S3-compatible):
# AWS_REGION=auto
# S3_BUCKET=your-r2-bucket-name
# AWS_ACCESS_KEY_ID=your-r2-access-key
# AWS_SECRET_ACCESS_KEY=your-r2-secret-key

# -----------------------------------------------------------------------------
# OpenAI Configuration (for AI Coach)
# -----------------------------------------------------------------------------
# Get your API key from: https://platform.openai.com/api-keys
# Leave empty if not using AI Coach (will use mock responses)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# Alternative models:
# OPENAI_MODEL=gpt-4
# OPENAI_MODEL=gpt-3.5-turbo

# -----------------------------------------------------------------------------
# Firebase Configuration (for Push Notifications)
# -----------------------------------------------------------------------------
# Path to Firebase service account JSON file
# Download from: https://console.firebase.google.com/project/YOUR_PROJECT/settings/serviceaccounts/adminsdk
# Leave empty if not using push notifications
FIREBASE_CREDENTIALS_PATH=

# Example:
# FIREBASE_CREDENTIALS_PATH=./firebase-credentials.json

# -----------------------------------------------------------------------------
# Error Tracking & Monitoring (Sentry)
# -----------------------------------------------------------------------------
# Get your DSN from: https://sentry.io/settings/YOUR_ORG/projects/YOUR_PROJECT/keys/
# Leave empty if not using Sentry
SENTRY_DSN=

# Example:
# SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100

# Rate limits by endpoint type:
# - Auth endpoints: 5/minute
# - API read: 100/minute
# - API write: 30/minute
# - File uploads: 10/hour
# - AI coach: 20/hour

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
# For development:
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000

# For production, specify your actual domains:
# ALLOWED_ORIGINS=https://tribe.app,https://app.tribe.com,https://www.tribe.app

# For Flutter mobile app (deep linking):
# ALLOWED_ORIGINS=https://tribe.app,tribe://app

# -----------------------------------------------------------------------------
# Optional: Email Configuration (for password reset, verification)
# -----------------------------------------------------------------------------
# Uncomment and configure if you want to send emails
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM_EMAIL=noreply@tribe.app
# SMTP_FROM_NAME=Tribe

# For Gmail, you'll need an App Password:
# https://support.google.com/accounts/answer/185833

# For SendGrid:
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=your-sendgrid-api-key

# For AWS SES:
# SMTP_HOST=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_USER=your-ses-access-key
# SMTP_PASSWORD=your-ses-secret-key

# -----------------------------------------------------------------------------
# Optional: Logging Configuration
# -----------------------------------------------------------------------------
# LOG_LEVEL=INFO
# LOG_FORMAT=json
# LOG_FILE=logs/app.log

# -----------------------------------------------------------------------------
# Optional: Celery Configuration (for background tasks)
# -----------------------------------------------------------------------------
# CELERY_BROKER_URL=redis://localhost:6379/1
# CELERY_RESULT_BACKEND=redis://localhost:6379/2

# -----------------------------------------------------------------------------
# Production-Specific Settings
# -----------------------------------------------------------------------------
# Uncomment and set for production deployment:

# APP_ENV=production
# DEBUG=false
# SECRET_KEY=your-production-secret-key-here
# JWT_SECRET_KEY=your-production-jwt-secret-key-here

# Database (production):
# DATABASE_URL=postgresql+asyncpg://user:password@prod-db.example.com:5432/tribe_prod

# Redis (production):
# REDIS_URL=redis://:password@prod-redis.example.com:6379/0

# CORS (production):
# ALLOWED_ORIGINS=https://tribe.app,https://app.tribe.com

# =============================================================================
# Quick Setup Guide
# =============================================================================
#
# 1. Copy this file:
#    cp .env.example .env
#
# 2. Update the following REQUIRED variables:
#    - DATABASE_URL (if not using Docker)
#    - JWT_SECRET_KEY (generate a strong random key)
#    - SECRET_KEY (generate a strong random key)
#
# 3. Update OPTIONAL variables as needed:
#    - OPENAI_API_KEY (for AI Coach)
#    - AWS credentials (for file uploads)
#    - FIREBASE_CREDENTIALS_PATH (for push notifications)
#    - SENTRY_DSN (for error tracking)
#
# 4. Generate secure keys:
#    python -c "import secrets; print('JWT_SECRET_KEY=' + secrets.token_urlsafe(32))"
#    python -c "import secrets; print('SECRET_KEY=' + secrets.token_urlsafe(32))"
#
# =============================================================================
